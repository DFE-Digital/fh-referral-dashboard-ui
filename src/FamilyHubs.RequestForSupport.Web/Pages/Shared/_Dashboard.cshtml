@using FamilyHubs.RequestForSupport.Web.Pages.VcsRequestForSupport

@model IDashboard<FamilyHubs.ReferralService.Shared.Dto.ReferralDto>

<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
        <div class="moj-scrollable-pane"><table class="govuk-table @Model.TableClass">
                <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    @foreach (var columnHeader in Model.ColumnHeaders)
                    {
                        <th scope="col" class="govuk-table__header" @(columnHeader.Sort.HasValue ? $"aria-sort={columnHeader.Sort.Value}" : "")>
                            @Html.Raw(columnHeader.ContentAsHtml)
                        </th>
                    }
                </tr>
                </thead>

                <tbody class="govuk-table__body">
                @foreach (var row in Model.Rows)
                {
                    <tr class="govuk-table__row">
                        @foreach (var cell in row.Cells)
                        {
                            <td class="govuk-table__cell">
                                @* todo: render partial in Model instead, if can't get past generic model *@
                                @if (cell.PartialName != null)
                                {
                                    <partial name="@cell.PartialName" model="row.Item"/>
                                }
                                else
                                {
                                    @Html.Raw(cell.ContentAsHtml)
                                }
                            </td>
                        }
                    </tr>
                }
                @*                     @foreach (var item in Model.SearchResults!.Items)
                    {
                        var itemStatus = item.Status.Name;

                        <tr class="govuk-table__row">
                            <td class="govuk-table__cell">
                                <a asp-page="/VcsRequestForSupport/ConnectDetails" asp-route-id="@item.Id" class="govuk-!-margin-right-1">@item.RecipientDto.Name</a>
                            </td>
                            <td class="govuk-table__cell">@item.Created?.ToString("dd-MMM-yyyy")</td>

                            <td class="govuk-table__cell">@item.Id.ToString("X4")</td>

                            <td class="govuk-table__cell">
                                <partial name="_ConnectionStatus" for="@itemStatus" />
                            </td>
                        </tr>
                    }
 *@
                </tbody>
            </table>
        </div>
        <partial name="_LargeSetPagination" model='Model.Pagination' />
    </div>
</div>
